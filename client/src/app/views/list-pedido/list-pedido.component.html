<div class="container" style = "margin-top: 2em;">

  <mat-card class = "divcard">
  <div class="titulo">
    <h1><b>PEDIDOS</b></h1>
  </div>
  
  <button mat-raised-button color="primary"  style="margin-bottom: 20px;"routerLink="../create/ ">CRIAR <span class="material-icons">
    add_box
    </span></button>  

  <table class="table table-hover">
    
      <tr>
        <th>Mesa</th>
        <th>Status </th>
        <th>Produtos</th>
        <th>SubTotal</th>
        <th></th>   
        <th></th>   
        
      </tr>
    
    <tbody>

      <tr *ngFor="let pedido of pedidos">
        <td>{{pedido.numeromesa}}</td>
        <td>{{pedido.status}}</td>
          <mat-accordion>
            <mat-expansion-panel hideToggle>
              <mat-expansion-panel-header>
                <mat-panel-title class="is-warning">
                  Ver 
                  <span class="material-icons">
                    expand_more
                    </span>
                </mat-panel-title>
              </mat-expansion-panel-header>
              <table class="col-12">
              <tr>
                <th>Nome</th>
                <th>Quantidade</th>
                <th>ValorUnit</th>
              </tr>
                <tbody *ngFor= "let produto of pedido.produtos">
                  <td>{{produto.nome}}</td>
                  <td>{{produto.quantidade}}</td>
                  <td>{{produto.valor | currency: "BRL"}}</td>
                </tbody>
              </table>
            </mat-expansion-panel>
            <mat-expansion-panel (opened)="panelOpenState = true"
                                 (closed)="panelOpenState = false">
            </mat-expansion-panel>
          </mat-accordion>
        
        <td>{{pedido.subtotal  | currency: "BRL" }}</td>
       
        <td>
          <div *ngIf="pedido.status === 'OCUPADA'">
            <button mat-stroked-button color="warn" routerLink="../create/{{pedido.numeromesa}}">ALTERAR</button>
        </div>
        </td>
        <td>
          <button mat-raised-button color="warn" (click)="finalizar(pedido.numeromesa)">Finalizar</button>
        </td>
      </tr>
    </tbody>
  </table>
</mat-card>
</div>